---
- include_vars: "{{ role_path }}/defaults/{{ ansible_os_family | lower }}.yml"

- include_vars: "{{ role_path }}/defaults/unix.yml"

- name: Run user setup tasks
  include_tasks: "{{ role_path }}/tasks/unix/add-jenkins-user.yml"

- name: Write labels to file
  become: true
  template:
    src: "{{ role_path }}/files/labels.txt.j2"
    dest: "{{ jenkins_swarm_labels_file }}"
    owner: "{{ jenkins_config_owner }}"
    group: "{{ jenkins_config_group }}"

- name: Copy Swarm Client jar
  become: true
  copy:
    src: "{{ role_path }}/files/{{ jenkins_swarm_jar }}"
    dest: "{{ jenkins_swarm_jar_path }}"
    owner: "{{ jenkins_config_owner }}"
    group: "{{ jenkins_config_group }}"

- name: Copy logging properties file
  become: true
  copy:
    src: "{{ role_path }}/files/logging.properties"
    dest: "{{ jenkins_swarm_logging_properties }}"
    owner: "{{ jenkins_config_owner }}"
    group: "{{ jenkins_config_group }}"
