---
- name: Install apt dependencies
  become: true
  become_user: root
  become_method: sudo
  action: apt name={{item.key}} state=present
  with_dict: "{{ jenkins_node_packages }}"

- name: Run installation tasks common to Unix-like systems
  include_tasks: "{{ role_path }}/tasks/unix/install.yml"

- name: Install systemd service
  include_tasks: "{{ role_path }}/tasks/debian/install-systemd.yml"
  when: jenkins_swarm_use_script != true

- name: Create shell script launcher
  include_tasks: "{{ role_path }}/tasks/unix/install-script.yml"
  when: jenkins_swarm_use_script
